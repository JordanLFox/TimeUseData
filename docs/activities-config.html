<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities Configuration - O-ELIDDI Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background-color: #fafafa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        .nav-back {
            margin-bottom: 1rem;
        }
        .nav-back a {
            color: #667eea;
            text-decoration: none;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            display: inline-block;
        }
        .section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .section h2 {
            color: #667eea;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }
        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        pre {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #e9ecef;
        }
        pre code {
            background: none;
            padding: 0;
        }
        .field-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .field-table th, .field-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .field-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .field-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .required {
            color: #dc3545;
            font-weight: bold;
        }
        .optional {
            color: #28a745;
            font-weight: bold;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .example-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="nav-back">
        <a href="index.html">‚Üê Back to Documentation Home</a>
    </div>

    <div class="header">
        <h1>Activities Configuration</h1>
        <p>Understanding and configuring the activities.json file</p>
    </div>

    <div class="section">
        <h2>Overview</h2>
        <p>The <code>settings/activities.json</code> file is the central configuration file that defines how your time-use diary study will operate. It controls everything from the experiment ID and general settings to the specific activities participants can select and the timelines they interact with.</p>
        
        <div class="highlight">
            <strong>Important:</strong> This file must be valid JSON. Any syntax errors will prevent the application from loading properly.
        </div>
    </div>

    <div class="section">
        <h2>File Structure</h2>
        <p>The activities.json file has two main sections:</p>
        <ul>
            <li><strong>general:</strong> Global study settings and configuration</li>
            <li><strong>timeline:</strong> Timeline definitions and activity categories</li>
        </ul>

        <pre><code>{
  "general": {
    // Study-level configuration
  },
  "timeline": {
    "primary": { ... },
    "secondary": { ... },
    "location": { ... },
    "who": { ... },
    "device": { ... },
    "enjoyment": { ... }
  }
}</code></pre>
    </div>

    <div class="section">
        <h2>General Configuration Fields</h2>
        <p>The <code>general</code> section contains study-wide settings:</p>

        <table class="field-table">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>experimentID</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>JSPsych DataPipe experiment ID for data collection</td>
                </tr>
                <tr>
                    <td><code>app_name</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Display name for the application (e.g., "O-ELIDDI")</td>
                </tr>
                <tr>
                    <td><code>version</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Version number for tracking</td>
                </tr>
                <tr>
                    <td><code>author</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Study author or researcher name</td>
                </tr>
                <tr>
                    <td><code>language</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Language code (e.g., "en", "es", "fr")</td>
                </tr>
                <tr>
                    <td><code>instructions</code></td>
                    <td>Boolean</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Whether to show instruction pages</td>
                </tr>
                <tr>
                    <td><code>primary_redirect_url</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>URL to redirect to after successful data submission</td>
                </tr>
                <tr>
                    <td><code>fallbackToCSV</code></td>
                    <td>Boolean</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Whether to download CSV if DataPipe fails</td>
                </tr>
            </tbody>
        </table>

        <div class="example-box">
            <strong>Example General Configuration:</strong>
            <pre><code>"general": {
  "experimentID": "YOUR_DATAPIPE_EXPERIMENT_ID",
  "app_name": "Daily Activity Study",
  "version": "1.0.0",
  "author": "Dr. Jane Smith",
  "language": "en",
  "instructions": true,
  "primary_redirect_url": "pages/thank-you.html",
  "fallbackToCSV": true
}</code></pre>
        </div>
    </div>

    <div class="section">
        <h2>Timeline Configuration</h2>
        <p>Each timeline in the <code>timeline</code> section represents a different dimension of activity tracking. Common timelines include:</p>
        
        <ul>
            <li><strong>primary:</strong> Main daily activities</li>
            <li><strong>secondary:</strong> Secondary concurrent activities</li>
            <li><strong>location:</strong> Where activities took place</li>
            <li><strong>who:</strong> Social context (who was present)</li>
            <li><strong>device:</strong> Technology usage</li>
            <li><strong>enjoyment:</strong> Activity enjoyment ratings</li>
        </ul>

        <h3>Timeline-Level Fields</h3>
        <table class="field-table">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>name</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>Display name for the timeline</td>
                </tr>
                <tr>
                    <td><code>description</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Description or instructions for participants</td>
                </tr>
                <tr>
                    <td><code>mode</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>"single-choice" or "multiple-choice"</td>
                </tr>
                <tr>
                    <td><code>min_coverage</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Minimum percentage of day that must be covered</td>
                </tr>
                <tr>
                    <td><code>categories</code></td>
                    <td>Array</td>
                    <td><span class="required">Required</span></td>
                    <td>Array of activity categories</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Activity Category Structure</h2>
        <p>Each category contains a group of related activities:</p>

        <table class="field-table">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>name</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>Category name (e.g., "Personal", "Work/Study")</td>
                </tr>
                <tr>
                    <td><code>color</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Default color for activities in this category</td>
                </tr>
                <tr>
                    <td><code>activities</code></td>
                    <td>Array</td>
                    <td><span class="required">Required</span></td>
                    <td>Array of activity objects</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Activity Object Structure</h2>
        <p>Each activity object defines a specific activity participants can select:</p>

        <table class="field-table">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>name</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>Full activity name displayed to participants</td>
                </tr>
                <tr>
                    <td><code>code</code></td>
                    <td>Number</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Numeric code for data analysis (e.g., 101, 102)</td>
                </tr>
                <tr>
                    <td><code>label</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Descriptive label for the activity</td>
                </tr>
                <tr>
                    <td><code>short</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Shortened name for display in compact spaces</td>
                </tr>
                <tr>
                    <td><code>vshort</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Very short abbreviation (3-4 characters)</td>
                </tr>
                <tr>
                    <td><code>color</code></td>
                    <td>String</td>
                    <td><span class="required">Required</span></td>
                    <td>Hex color code for timeline visualization</td>
                </tr>
                <tr>
                    <td><code>examples</code></td>
                    <td>String</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Examples or clarification for participants</td>
                </tr>
                <tr>
                    <td><code>childItems</code></td>
                    <td>Array</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Sub-activities for hierarchical organization</td>
                </tr>
                <tr>
                    <td><code>subselection</code></td>
                    <td>Object</td>
                    <td><span class="optional">Optional</span></td>
                    <td>Additional questions for this activity</td>
                </tr>
            </tbody>
        </table>

        <div class="example-box">
            <strong>Example Activity Object:</strong>
            <pre><code>{
  "name": "Playing Sports, Exercise",
  "code": 129,
  "label": "playing sports, exercise",
  "short": "exercise",
  "vshort": "ex",
  "color": "#b9ead3",
  "childItems": [
    {
      "name": "Walking and hiking",
      "code": 129,
      "label": "playing sports, exercise",
      "short": "exercise",
      "vshort": "ex",
      "color": "#b9ead3"
    },
    {
      "name": "Jogging and running",
      "code": 129,
      "label": "playing sports, exercise", 
      "short": "exercise",
      "vshort": "ex",
      "color": "#b9ead3"
    }
  ]
}</code></pre>
        </div>
    </div>

    <div class="section">
        <h2>Color Guidelines</h2>
        <p>Colors should be specified as hex codes (e.g., <code>#b9ead3</code>). Consider these guidelines:</p>
        <ul>
            <li>Use distinct colors for different activity categories</li>
            <li>Ensure sufficient contrast for accessibility</li>
            <li>Use similar hues for related activities within a category</li>
            <li>Avoid very dark colors that make text difficult to read</li>
        </ul>

        <div class="warning">
            <strong>Accessibility Note:</strong> Test your color choices with colorblind users or accessibility tools to ensure all participants can distinguish between activities.
        </div>
    </div>

    <div class="section">
        <h2>Hierarchical Activities</h2>
        <p>Activities can have sub-activities defined in the <code>childItems</code> array. This creates a two-level hierarchy where participants first select a main activity, then optionally specify a more detailed sub-activity.</p>

        <div class="highlight">
            <strong>Best Practice:</strong> Use hierarchical activities when you want both broad categories and specific details. For example, "Transportation" might have child items like "Car", "Bus", "Walking", etc.
        </div>
    </div>

    <div class="section">
        <h2>Timeline Modes</h2>
        <h3>Single-Choice Mode</h3>
        <p>In single-choice mode, participants can only select one activity per time slot. This is typical for primary activity timelines.</p>

        <h3>Multiple-Choice Mode</h3>
        <p>In multiple-choice mode, participants can select multiple activities simultaneously. This is useful for dimensions like "who was present" where multiple people might be involved.</p>

        <div class="example-box">
            <strong>Example Multiple-Choice Timeline:</strong>
            <pre><code>"who": {
  "name": "Who",
  "description": "Who were you with?",
  "mode": "multiple-choice",
  "min_coverage": "0",
  "categories": [
    {
      "name": " ",
      "activities": [
        {
          "name": "Alone",
          "color": "#cdf0a8"
        },
        {
          "name": "Spouse / partner", 
          "color": "#f0a8d1"
        },
        {
          "name": "Child under 12 from your household",
          "color": "#a8bff0"
        }
      ]
    }
  ]
}</code></pre>
        </div>
    </div>

    <div class="section">
        <h2>Validation and Testing</h2>
        <p>Before deploying your study:</p>
        <ol>
            <li><strong>Validate JSON:</strong> Use a JSON validator to ensure syntax is correct</li>
            <li><strong>Test Colors:</strong> Verify all hex colors are valid and visually distinct</li>
            <li><strong>Check Completeness:</strong> Ensure all required fields are present</li>
            <li><strong>Test User Experience:</strong> Have someone test the activity selection process</li>
            <li><strong>Verify Data Export:</strong> Test that activity codes and names appear correctly in exported data</li>
        </ol>

        <div class="warning">
            <strong>Common Errors:</strong>
            <ul>
                <li>Missing commas between objects or properties</li>
                <li>Invalid hex color codes (must start with # and be 6 characters)</li>
                <li>Inconsistent activity codes across similar activities</li>
                <li>Missing required fields like "name" or "color"</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>Multiple Activity Sets</h2>
        <p>The <code>settings/</code> directory can contain multiple activity files for different studies:</p>
        <ul>
            <li><code>activities.json</code> - Default configuration</li>
            <li><code>activities_game.json</code> - Gaming study activities</li>
            <li><code>activities_mc.json</code> - Multiple choice variant</li>
            <li><code>activities_usoc.json</code> - USOC study activities</li>
        </ul>

        <p>You can switch between configurations by modifying the import in your main JavaScript files or creating different deployment versions.</p>
    </div>
</body>
</html>