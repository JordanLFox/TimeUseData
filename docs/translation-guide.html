<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation Guide - O-ELIDDI Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background-color: #fafafa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .nav-back {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .nav-back a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        .nav-back a:hover {
            text-decoration: underline;
        }
        .section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .section h2 {
            color: #667eea;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
            margin-top: 0;
        }
        .section h3 {
            color: #764ba2;
            margin-top: 2rem;
        }
        .section h4 {
            color: #555;
            margin-top: 1.5rem;
        }
        .toc {
            background: #f8f9ff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .toc h3 {
            margin-top: 0;
            color: #667eea;
        }
        .toc ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        pre {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        pre code {
            background: transparent;
            padding: 0;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .step-number {
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        .checklist {
            background: #f8f9ff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
        }
        .checklist h4 {
            color: #667eea;
            margin-top: 0;
        }
        .checklist ul {
            list-style: none;
            padding-left: 0;
        }
        .checklist li {
            padding: 0.5rem 0;
            position: relative;
            padding-left: 2rem;
        }
        .checklist li:before {
            content: "☐";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e9ecef;
            padding: 0.75rem;
            text-align: left;
        }
        th {
            background: #f8f9ff;
            color: #667eea;
            font-weight: 600;
        }
        .footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            border-top: 1px solid #e9ecef;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Translation Guide</h1>
        <p>Step-by-step instructions for adding new language translations to O-ELIDDI</p>
    </div>

    <div class="nav-back">
        <a href="index.html">← Back to Documentation Index</a>
    </div>

    <div class="toc">
        <h3>Table of Contents</h3>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#step-by-step">Step-by-Step Translation Process</a></li>
            <li><a href="#translation-reference">Translation Reference</a></li>
            <li><a href="#common-issues">Common Issues and Solutions</a></li>
            <li><a href="#testing-checklist">Testing Checklist</a></li>
            <li><a href="#language-codes">Language Codes Reference</a></li>
        </ul>
    </div>

    <div class="section" id="overview">
        <h2>Overview</h2>
        <p>The O-ELIDDI application uses a comprehensive internationalization (i18n) system that supports multiple languages with easy extensibility. This guide provides step-by-step instructions for adding new language translations.</p>
        
        <h3>Currently Supported Languages</h3>
        <ul>
            <li><strong>English (en)</strong> - Default/fallback language</li>
            <li><strong>Spanish (es)</strong> - Complete translation</li>
            <li><strong>French (fr)</strong> - Complete translation</li>
        </ul>
    </div>

    <div class="section" id="prerequisites">
        <h2>Prerequisites</h2>
        <p>Before starting translation work, ensure you have:</p>
        <ul>
            <li><strong>Basic JSON knowledge</strong> - Translation files use JSON format</li>
            <li><strong>Understanding of the application</strong> - Familiarize yourself with the app's functionality</li>
            <li><strong>Access to the codebase</strong> - You'll need to create/modify files in the <code>/locales/</code> directory</li>
            <li><strong>Browser for testing</strong> - To verify translations work correctly</li>
        </ul>
    </div>

    <div class="section" id="step-by-step">
        <h2>Step-by-Step Translation Process</h2>

        <h3><span class="step-number">1</span>Create the Translation File</h3>
        <ol>
            <li>Navigate to the <code>/locales/</code> directory in the project root</li>
            <li>Create a new JSON file named with the language code (e.g., <code>de.json</code> for German, <code>it.json</code> for Italian)</li>
            <li>Copy the structure from <code>en.json</code> as your starting template:</li>
        </ol>

        <pre><code># Copy English template to new language file
cp locales/en.json locales/de.json</code></pre>

        <h3><span class="step-number">2</span>Translate the Content</h3>
        <p>Open your new language file and translate each text string. Here's the basic structure:</p>

        <pre><code>{
  "instructions": {
    "title": "Your Translation Here",
    "subtitle": "Your Translation Here",
    "mainInstruction": "Translate this text...",
    "step1": {
      "title": "Your Translation Here",
      "horizontal": "Instructions for desktop/horizontal layout",
      "vertical": "Instructions for mobile/vertical layout"
    }
  },
  "buttons": {
    "submit": "Your Translation Here",
    "start": "Your Translation Here",
    "undo": "Your Translation Here"
  }
}</code></pre>

        <div class="highlight">
            <h4>Translation Guidelines</h4>
            <ul>
                <li><strong>Text Length:</strong> Some languages (like German) can be 30-40% longer than English. Test that longer text doesn't break the UI layout.</li>
                <li><strong>HTML Content:</strong> Some translations contain HTML markup like <code>&lt;span class="emphasis"&gt;yesterday&lt;/span&gt;</code>. Preserve HTML tags and only translate the text content.</li>
                <li><strong>Context-Specific Content:</strong> The app has different instructions for horizontal (desktop) vs vertical (mobile) layouts. Translate both versions appropriately.</li>
                <li><strong>Special Characters:</strong> JSON requires escaping quotes with <code>\"</code>. Use proper Unicode characters for accented letters.</li>
            </ul>
        </div>

        <h3><span class="step-number">3</span>Configure the Language Setting</h3>
        <p>Update the default language in the application settings:</p>
        <ol>
            <li>Open <code>settings/activities.json</code></li>
            <li>Locate the <code>general</code> section</li>
            <li>Update the <code>language</code> field:</li>
        </ol>

        <pre><code>{
  "general": {
    "language": "de",
    "other_settings": "..."
  }
}</code></pre>

        <h3><span class="step-number">4</span>Test Your Translation</h3>
        
        <h4>Basic Testing</h4>
        <ol>
            <li>Start the development server: <code>npm start</code></li>
            <li>Open the application in your browser</li>
            <li>Check that your translations appear correctly</li>
            <li>Test both desktop and mobile views</li>
        </ol>

        <h4>Debug Console Testing</h4>
        <p>Open browser developer tools console and test specific translations:</p>

        <pre><code>// Test translation loading
await window.i18n.init('de');

// Test specific translation keys
console.log('Title:', window.i18n.t('instructions.title'));
console.log('Submit button:', window.i18n.t('buttons.submit'));

// Test with URL parameter
// Visit: http://localhost:8080?lang=de</code></pre>

        <h4>URL Parameter Testing</h4>
        <p>You can test your language without changing the default setting:</p>
        <ul>
            <li>Main app: <code>http://localhost:8080?lang=de</code></li>
            <li>Instructions page: <code>http://localhost:8080/pages/instructions.html?lang=de</code></li>
        </ul>

        <h3><span class="step-number">5</span>Comprehensive Testing</h3>
        <p>Test all major sections of the application:</p>
        <ul>
            <li><strong>Instructions page</strong> - Check all instruction text and button labels</li>
            <li><strong>Main timeline interface</strong> - Verify activity labels and UI elements</li>
            <li><strong>Modal dialogs</strong> - Test popup windows and form elements</li>
            <li><strong>Thank you page</strong> - Check completion messages</li>
            <li><strong>Error messages</strong> - Test any error scenarios</li>
        </ul>

        <h3><span class="step-number">6</span>Validate Translation Completeness</h3>
        <p>Use the debug tools to check for missing translations:</p>

        <pre><code>// Load your language and test for missing keys
window.i18n.init('de').then(() => {
  // Test various translation keys
  const testKeys = [
    'instructions.title',
    'buttons.submit',
    'modals.childItems.title',
    'messages.loading',
    'thankYou.title'
  ];
  
  testKeys.forEach(key => {
    const translation = window.i18n.t(key);
    console.log(`${key}: ${translation}`);
    
    // Check if it fell back to English (indicates missing translation)
    if (translation === window.i18n.t(key, 'en')) {
      console.warn(`Possible missing translation for: ${key}`);
    }
  });
});</code></pre>
    </div>

    <div class="section" id="translation-reference">
        <h2>Translation Reference</h2>
        
        <h3>Complete Translation File Structure</h3>
        <p>Here's the complete structure you need to translate:</p>

        <pre><code>{
  "instructions": {
    "title": "Instructions",
    "subtitle": "How to use this research tool",
    "mainInstruction": "Think about activities you did &lt;span class=\"emphasis\"&gt;yesterday&lt;/span&gt; and create a timeline of your day.",
    "step1": {
      "title": "Select and Place an Activity",
      "horizontal": "Choose an activity from the menu at the bottom of the screen, then click on the timeline to place it.",
      "vertical": "Tap the (+) button in the bottom right corner to add activities to your timeline."
    },
    "step2": {
      "title": "Adjust Time and Duration", 
      "horizontal": "Drag the ends of activities to adjust their start time and duration.",
      "vertical": "Tap and drag activities to reposition them, or drag their edges to adjust timing."
    },
    "step3": {
      "title": "Submit Your Timeline",
      "description": "When you're satisfied with your timeline, click the Submit button to save your data.",
      "submitHelp": "Submit your completed timeline"
    }
  },
  "buttons": {
    "submit": "Submit",
    "start": "Start Timeline",
    "undo": "Undo",
    "next": "Next",
    "previous": "Previous", 
    "close": "Close",
    "addActivity": "Add Activity",
    "undoTooltip": "Undo the last action"
  },
  "modals": {
    "childItems": {
      "title": "Select Sub-Activity",
      "titleFor": "Select an option for \"{activityName}\"",
      "noOptions": "No sub-activities available for this activity."
    },
    "customActivity": {
      "title": "Add Custom Activity",
      "placeholder": "Enter activity name...",
      "addButton": "Add Activity",
      "cancelButton": "Cancel"
    }
  },
  "messages": {
    "loading": "Loading...",
    "error": "An error occurred while processing your request.",
    "success": "Your timeline has been saved successfully!",
    "offline": "You are currently offline. Your data will be saved when connection is restored.",
    "dataUploaded": "Data uploaded successfully",
    "uploadError": "Error uploading data. Please try again."
  },
  "activities": {
    "selectActivity": "Select an activity",
    "customActivity": "Custom activity",
    "noActivitiesFound": "No activities found"
  },
  "thankYou": {
    "title": "Thank You!",
    "message": "Your timeline has been recorded successfully. Thank you for participating in our research.",
    "footer": "You may now close this browser window."
  }
}</code></pre>

        <h3>Special Translation Notes</h3>
        
        <div class="highlight">
            <h4>Responsive Content</h4>
            <p><code>horizontal</code> vs <code>vertical</code> instructions are for different screen orientations:</p>
            <ul>
                <li>Desktop users see horizontal instructions</li>
                <li>Mobile users see vertical instructions</li>
                <li>Both should be translated to make sense in their respective contexts</li>
            </ul>
        </div>

        <div class="highlight">
            <h4>Parameter Substitution</h4>
            <p>Some strings contain <code>{parameter}</code> placeholders like <code>{activityName}</code>:</p>
            <ul>
                <li>Translate around these placeholders but keep the exact parameter names</li>
                <li>Example: <code>"Select option for {activityName}"</code> → <code>"Seleccionar opción para {activityName}"</code></li>
            </ul>
        </div>

        <div class="highlight">
            <h4>HTML Markup</h4>
            <p>Some translations contain HTML like <code>&lt;span class="emphasis"&gt;yesterday&lt;/span&gt;</code>:</p>
            <ul>
                <li>Only translate the text content, preserve all HTML tags and attributes</li>
                <li>These are used for styling specific words or phrases</li>
            </ul>
        </div>
    </div>

    <div class="section" id="common-issues">
        <h2>Common Issues and Solutions</h2>

        <table>
            <thead>
                <tr>
                    <th>Problem</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Text is cut off or overflows</td>
                    <td>Some languages are longer than English. Test translations on both desktop and mobile to ensure they fit properly.</td>
                </tr>
                <tr>
                    <td>Special characters don't display correctly</td>
                    <td>Ensure your JSON file is saved with UTF-8 encoding and use proper Unicode characters.</td>
                </tr>
                <tr>
                    <td>HTML markup is displayed as text</td>
                    <td>Check that you're using the correct <code>data-i18n-html</code> attribute for content that should render HTML.</td>
                </tr>
                <tr>
                    <td>Translations don't appear</td>
                    <td>Check JSON syntax is valid (no trailing commas, proper quotes). Verify language code matches filename. Clear browser cache.</td>
                </tr>
                <tr>
                    <td>Fallback to English occurs</td>
                    <td>Check that all translation keys exist in your file and match the exact key names used in the English version.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section" id="testing-checklist">
        <h2>Testing Checklist</h2>
        <div class="checklist">
            <h4>Before submitting your translation:</h4>
            <ul>
                <li>All text strings are translated</li>
                <li>HTML markup is preserved in translated strings</li>
                <li>Parameter placeholders (<code>{activityName}</code>) are preserved</li>
                <li>Translation works on both desktop and mobile layouts</li>
                <li>Special characters display correctly</li>
                <li>No text is cut off or overflows containers</li>
                <li>JSON file syntax is valid</li>
                <li>Language loads without console errors</li>
                <li>Fallback to English doesn't occur for translated strings</li>
            </ul>
        </div>
    </div>

    <div class="section" id="language-codes">
        <h2>Language Codes Reference</h2>
        <p>Use standard ISO 639-1 language codes for your translation files:</p>

        <table>
            <thead>
                <tr>
                    <th>Language</th>
                    <th>Code</th>
                    <th>Filename</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>German</td><td>de</td><td>de.json</td></tr>
                <tr><td>Italian</td><td>it</td><td>it.json</td></tr>
                <tr><td>Portuguese</td><td>pt</td><td>pt.json</td></tr>
                <tr><td>Dutch</td><td>nl</td><td>nl.json</td></tr>
                <tr><td>Russian</td><td>ru</td><td>ru.json</td></tr>
                <tr><td>Japanese</td><td>ja</td><td>ja.json</td></tr>
                <tr><td>Korean</td><td>ko</td><td>ko.json</td></tr>
                <tr><td>Chinese</td><td>zh</td><td>zh.json</td></tr>
                <tr><td>Arabic</td><td>ar</td><td>ar.json</td></tr>
            </tbody>
        </table>

        <div class="highlight">
            <p><strong>Note:</strong> For regional variants, use the full locale code (e.g., <code>pt-BR</code> for Brazilian Portuguese, <code>zh-CN</code> for Simplified Chinese).</p>
        </div>
    </div>

    <div class="section">
        <h2>Submitting Your Translation</h2>
        <ol>
            <li><strong>Test thoroughly</strong> using the checklist above</li>
            <li><strong>Create a pull request</strong> with your new translation file</li>
            <li><strong>Include testing notes</strong> about any layout issues or special considerations</li>
            <li><strong>Document any cultural adaptations</strong> you made for the target language</li>
        </ol>

        <div class="success">
            <p><strong>Need Help?</strong> If you encounter issues during translation, check the browser console for JavaScript errors, use the debug script to test specific translations, or compare with existing translations (Spanish/French) for reference.</p>
        </div>
    </div>

    <div class="footer">
        <p><a href="index.html">← Back to Documentation Index</a></p>
    </div>
</body>
</html>